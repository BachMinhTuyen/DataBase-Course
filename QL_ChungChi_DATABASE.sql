CREATE DATABASE QL_CHUNGCHI
GO

USE QL_CHUNGCHI
GO


CREATE TABLE LOAICC
(
	MALCC CHAR(3) NOT NULL PRIMARY KEY,
	TENLCC NVARCHAR(30)
)

CREATE TABLE CHUNGCHI
(
	MACC CHAR(4) NOT NULL PRIMARY KEY,
	TENCC NVARCHAR(30),
	THOIGIANHOC INT,
	MALCC CHAR(3),
	CONSTRAINT FK_MALCC FOREIGN KEY (MALCC) REFERENCES LOAICC(MALCC)
)

CREATE TABLE HOCVIEN
(
	MAHV CHAR(5) NOT NULL PRIMARY KEY,
	HOTEN NVARCHAR(30),
	NGAYSINH DATE,
	GIOITINH NCHAR(3),
	DIACHI NVARCHAR(40)
)

CREATE TABLE LOPHOC
(
	MALH CHAR(6) NOT NULL PRIMARY KEY,
	TENLH NVARCHAR(30),
	NGAYBD DATE,
	NGAYKT DATE,
	MACC CHAR(4),
	HOCPHI INT,
	CONSTRAINT FK_MACC FOREIGN KEY (MACC) REFERENCES CHUNGCHI(MACC)
)

CREATE TABLE DANGKY
(
	MAHV CHAR(5) NOT NULL,
	MALH CHAR(6) NOT NULL,
	NGAYDK DATE,
	TIENDATCOC INT,
	TIENCONLAI INT,
	CONSTRAINT PK_DANGKY PRIMARY KEY (MAHV, MALH),
	CONSTRAINT FK_MAHV FOREIGN KEY (MAHV) REFERENCES HOCVIEN(MAHV),
	CONSTRAINT FK_MALH FOREIGN KEY (MALH) REFERENCES LOPHOC(MALH),
)

INSERT INTO LOAICC(MALCC, TENLCC)
VALUES ('CCA', N'Chứng chỉ A'),
('CCB', N'Chứng chỉ B'),
('CAD', N'Chứng chỉ AutoCad')

INSERT INTO CHUNGCHI(MACC, TENCC, THOIGIANHOC, MALCC)
VALUES ('CCA1', N'Chứng chỉ A hạng 1', 5, 'CCA'),
('CCA2', N'Chứng chỉ A hạng 2', 6, 'CCA'),
('CCB1', N'Chứng chỉ B hạng 1', 6, 'CCB'),
('CCB2', N'Chứng chỉ B hạng 2', 8, 'CCB'),
('CAD1', N'Chứng chỉ AutoCad', 9, 'CAD')

INSERT INTO HOCVIEN(MAHV, HOTEN, NGAYSINH, GIOITINH, DIACHI)
VALUES ('HV001', N'Trần Thanh Bình', '1998-12-04', N'Nữ', N'123, Trương Định, Q3, TP. HCM'),
('HV002', N'Trần Thị Lan', '1997-01-12', N'Nữ', N'1, Paster, Q3, TP.HCM'),
('HV003', N'Lê Thành Nam', '1999-06-23', N'Nam', N'12, Ngô Quyền, Q5, TP. HCM'),
('HV004', N'Nguyễn Thảo Mi', '1987-01-12', N'Nữ', N'120, Thành Thái, Q10, TP. HCM')

INSERT INTO LOPHOC(MALH, TENLH, NGAYBD, NGAYKT, MACC, HOCPHI)
VALUES ('CCA101', N'Chứng chỉ A 2,4,6', '2016-04-25', '2016-05-30', 'CCA1', 500000),
('CCA202', N'Chứng chỉ A 3,5,7', '2016-04-26', '2016-06-15', 'CCA2', 600000),
('CCB101', N'Chứng chỉ B 2,4,6', '2016-07-07', '2016-08-20', 'CCB1', 650000),
('CCB201', N'Chứng chỉ B 3,5,7', '2016-07-08', '2016-09-10', 'CCB2', 700000)

INSERT INTO DANGKY(MAHV, MALH, NGAYDK, TIENDATCOC, TIENCONLAI)
VALUES ('HV001', 'CCA101', '2016-04-24', 500000, 0),
('HV002', 'CCA202', '2016-04-26', 600000, 0),
('HV003', 'CCB101', '2016-07-07', 500000, 150000),
('HV004', 'CCB201', '2016-07-08', 500000, 200000)